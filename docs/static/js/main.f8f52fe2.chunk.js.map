{"version":3,"sources":["utils/utils.js","Sketch.js","shaders/vertex.glsl","shaders/fragment.glsl","App.js","serviceWorker.js","index.js","img/Toha.jpg","img/Toha-map.jpg"],"names":["loadImgs","urls","callback","imgsPromises","map","url","Promise","resolve","img","Image","src","onload","loadImg","all","then","imgs","Uniform","name","suffix","program","gl","this","location","getUniformLocation","prototype","set","method","values","args","concat","apply","Rect","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","verts","STATIC_DRAW","Float32Array","render","drawArrays","TRIANGLE_STRIP","clamp","number","lower","upper","undefined","console","log","GyroNorm","gn","Sketch","MainImg","MapImg","container","document","getElementById","canvas","createElement","appendChild","getContext","ratio","window","devicePixelRatio","windowWidth","innerWidth","windowHeight","innerHeight","mouseX","mouseY","mouseTargetX","mouseTargetY","imageOriginal","imageDepth","vth","hth","imageURLs","textures","startTime","Date","getTime","createScene","addTexture","mouseMove","gyro","source","type","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","Error","getShaderInfoLog","attachShader","a1","a2","width","offsetWidth","height","offsetHeight","style","imageAspect","uResolution","uRatio","uThreshold","viewport","resizeHandler","addEventListener","bind","createProgram","addShader","VERTEX_SHADER","FRAGMENT_SHADER","linkProgram","useProgram","uMouse","uTime","billboard","positionLocation","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","start","images","naturalHeight","naturalWidth","i","length","texture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","texImage2D","RGBA","UNSIGNED_BYTE","push","u_image0Location","u_image1Location","uniform1i","activeTexture","TEXTURE0","TEXTURE1","resize","that","maxTilt","init","gravityNormalized","data","y","do","gamma","x","beta","catch","e","halfX","halfY","clientX","clientY","currentTime","requestAnimationFrame","App","className","id","React","Component","Boolean","hostname","match","ReactDOM","navigator","serviceWorker","ready","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.f8f52fe2.chunk.js","sourcesContent":["export const loadImg = (url, resolve) => {\n  const img = new Image();\n  img.src = url;\n  img.onload = () => resolve(img);\n};\n\nexport const loadImgs = (urls, callback) => {\n  const imgsPromises = urls.map(\n    url => new Promise(resolve => loadImg(url, resolve))\n  );\n  Promise.all(imgsPromises).then(imgs => callback(imgs));\n};\n\nexport const Uniform = function(name, suffix, program, gl) {\n  this.name = name;\n  this.suffix = suffix;\n  this.gl = gl;\n  this.program = program;\n  this.location = gl.getUniformLocation(program, name);\n};\n\nUniform.prototype.set = function(...values) {\n  let method = \"uniform\" + this.suffix;\n  let args = [this.location].concat(values);\n  this.gl[method].apply(this.gl, args);\n};\n\n// ----- Rect ----- //\nexport const Rect = function(gl) {\n  const buffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n  gl.bufferData(gl.ARRAY_BUFFER, Rect.verts, gl.STATIC_DRAW);\n};\n\nRect.verts = new Float32Array([-1, -1, 1, -1, -1, 1, 1, 1]);\n\nRect.prototype.render = function(gl) {\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n};\n\nexport const clamp = (number, lower, upper) => {\n  if (number === number) {\n    if (upper !== undefined) {\n      number = number <= upper ? number : upper;\n    }\n    if (lower !== undefined) {\n      number = number >= lower ? number : lower;\n    }\n  }\n  return number;\n};\n","import GyroNorm from \"gyronorm\";\n\n// eslint-disable-next-line import/no-webpack-loader-syntax\nimport fragment from \"!!raw-loader!glslify-loader!./shaders/fragment.glsl\";\n// eslint-disable-next-line import/no-webpack-loader-syntax\nimport vertex from \"!!raw-loader!glslify-loader!./shaders/vertex.glsl\";\n\nimport { loadImgs, clamp, Rect, Uniform } from \"./utils/utils\";\n\nconsole.log(GyroNorm);\nconst gn = new GyroNorm();\n\nexport default class Sketch {\n  constructor(MainImg, MapImg) {\n    this.container = document.getElementById(\"gl\");\n    this.canvas = document.createElement(\"canvas\");\n\n    this.container.appendChild(this.canvas);\n    this.gl = this.canvas.getContext(\"webgl\");\n\n    this.ratio = window.devicePixelRatio;\n\n    this.windowWidth = window.innerWidth;\n    this.windowHeight = window.innerHeight;\n\n    this.mouseX = 0;\n    this.mouseY = 0;\n\n    this.mouseTargetX = 0;\n    this.mouseTargetY = 0;\n\n    this.imageOriginal = MainImg;\n    this.imageDepth = MapImg;\n\n    this.vth = 15;\n    this.hth = 35;\n\n    this.imageURLs = [this.imageOriginal, this.imageDepth];\n    this.textures = [];\n\n    // colors\n    // #575757\n    // #787878\n    // #a7a7a7\n    // #b7b7b7\n    // #d6d6d6\n    // #f7f7f7\n\n    this.startTime = new Date().getTime(); // Get start time for animating\n\n    this.createScene();\n    this.addTexture();\n    this.mouseMove();\n    this.gyro();\n  }\n\n  addShader(source, type) {\n    let shader = this.gl.createShader(type);\n    this.gl.shaderSource(shader, source);\n    this.gl.compileShader(shader);\n    let isCompiled = this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS);\n    if (!isCompiled) {\n      throw new Error(\n        \"Shader compile error: \" + this.gl.getShaderInfoLog(shader)\n      );\n    }\n    this.gl.attachShader(this.program, shader);\n  }\n\n  resizeHandler() {\n    this.windowWidth = window.innerWidth;\n    this.windowHeight = window.innerHeight;\n    this.width = this.container.offsetWidth;\n    // this.height = this.width/this.aspect;\n    this.height = this.container.offsetHeight;\n\n    this.canvas.width = this.width * this.ratio;\n    this.canvas.height = this.height * this.ratio;\n    this.canvas.style.width = this.width + \"px\";\n    this.canvas.style.height = this.height + \"px\";\n    let a1, a2;\n    if (this.height / this.width < this.imageAspect) {\n      a1 = 1;\n      a2 = this.height / this.width / this.imageAspect;\n    } else {\n      a1 = (this.width / this.height) * this.imageAspect;\n      a2 = 1;\n    }\n    this.uResolution.set(this.width, this.height, a1, a2);\n    this.uRatio.set(1 / this.ratio);\n    this.uThreshold.set(this.hth, this.vth);\n    this.gl.viewport(0, 0, this.width * this.ratio, this.height * this.ratio);\n  }\n\n  resize() {\n    this.resizeHandler();\n    window.addEventListener(\"resize\", this.resizeHandler.bind(this));\n  }\n\n  createScene() {\n    // create program\n    this.program = this.gl.createProgram();\n    // add shaders\n    this.addShader(vertex, this.gl.VERTEX_SHADER);\n    this.addShader(fragment, this.gl.FRAGMENT_SHADER);\n    // link & use program\n    this.gl.linkProgram(this.program);\n    this.gl.useProgram(this.program);\n\n    // create fragment uniforms\n    this.uResolution = new Uniform(\"resolution\", \"4f\", this.program, this.gl);\n    this.uMouse = new Uniform(\"mouse\", \"2f\", this.program, this.gl);\n    this.uTime = new Uniform(\"time\", \"1f\", this.program, this.gl);\n    this.uRatio = new Uniform(\"pixelRatio\", \"1f\", this.program, this.gl);\n    this.uThreshold = new Uniform(\"threshold\", \"2f\", this.program, this.gl);\n    // create position attrib\n    this.billboard = new Rect(this.gl);\n    this.positionLocation = this.gl.getAttribLocation(\n      this.program,\n      \"a_position\"\n    );\n    this.gl.enableVertexAttribArray(this.positionLocation);\n    this.gl.vertexAttribPointer(\n      this.positionLocation,\n      2,\n      this.gl.FLOAT,\n      false,\n      0,\n      0\n    );\n  }\n\n  addTexture() {\n    let that = this;\n    let gl = that.gl;\n    loadImgs(this.imageURLs, that.start.bind(this));\n  }\n\n  start(images) {\n    let that = this;\n    let gl = that.gl;\n\n    // connect images\n    this.imageAspect = images[0].naturalHeight / images[0].naturalWidth;\n    for (var i = 0; i < images.length; i++) {\n      let texture = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n\n      // Set the parameters so we can render any size image.\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n      // Upload the image into the texture.\n      gl.texImage2D(\n        gl.TEXTURE_2D,\n        0,\n        gl.RGBA,\n        gl.RGBA,\n        gl.UNSIGNED_BYTE,\n        images[i]\n      );\n\n      this.textures.push(texture);\n    }\n\n    // lookup the sampler locations.\n    let u_image0Location = this.gl.getUniformLocation(this.program, \"image0\");\n    let u_image1Location = this.gl.getUniformLocation(this.program, \"image1\");\n\n    // set which texture units to render with.\n    this.gl.uniform1i(u_image0Location, 0); // texture unit 0\n    this.gl.uniform1i(u_image1Location, 1); // texture unit 1\n\n    // Set each texture unit to use a particular texture.\n    this.gl.activeTexture(this.gl.TEXTURE0);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.textures[0]);\n    this.gl.activeTexture(this.gl.TEXTURE1);\n    this.gl.bindTexture(this.gl.TEXTURE_2D, this.textures[1]);\n\n    // start application\n    this.resize();\n    this.render();\n  }\n\n  gyro() {\n    let that = this;\n    this.maxTilt = 15;\n\n    gn.init({ gravityNormalized: true })\n      .then(function() {\n        gn.start(function(data) {\n          let y = data.do.gamma;\n          let x = data.do.beta;\n\n          that.mouseTargetY =\n            clamp(x, -that.maxTilt, that.maxTilt) / that.maxTilt;\n          that.mouseTargetX =\n            -clamp(y, -that.maxTilt, that.maxTilt) / that.maxTilt;\n        });\n      })\n      .catch(function(e) {\n        console.log(\"not supported\");\n        // Catch if the DeviceOrientation or DeviceMotion is not supported by the browser or device\n      });\n  }\n\n  mouseMove() {\n    let that = this;\n    document.addEventListener(\"mousemove\", function(e) {\n      let halfX = that.windowWidth / 2;\n      let halfY = that.windowHeight / 2;\n\n      that.mouseTargetX = (halfX - e.clientX) / halfX;\n      that.mouseTargetY = (halfY - e.clientY) / halfY;\n    });\n  }\n\n  render() {\n    let now = new Date().getTime();\n    let currentTime = (now - this.startTime) / 1000;\n\n    this.uTime.set(currentTime);\n    // inertia\n    this.mouseX += (this.mouseTargetX - this.mouseX) * 0.05;\n    this.mouseY += (this.mouseTargetY - this.mouseY) * 0.05;\n\n    this.uMouse.set(this.mouseX, this.mouseY);\n\n    // render\n    this.billboard.render(this.gl);\n    requestAnimationFrame(this.render.bind(this));\n  }\n}\n","export default \"#define GLSLIFY 1\\nattribute vec2 a_position;\\n\\nvoid main() {\\n  gl_Position = vec4( a_position, 0, 1 );\\n}\"","export default \"#ifdef GL_ES\\n  precision mediump float;\\n#define GLSLIFY 1\\n#endif\\n\\nuniform vec4 resolution;\\nuniform vec2 mouse;\\nuniform vec2 threshold;\\nuniform float time;\\nuniform float pixelRatio;\\nuniform sampler2D image0;\\nuniform sampler2D image1;\\n\\nvec2 mirrored(vec2 v) {\\n  vec2 m = mod(v,2.);\\n  return mix(m,2.0 - m, step(1.0 ,m));\\n}\\n\\nvoid main() {\\n  // uvs and textures\\n  vec2 uv = pixelRatio*gl_FragCoord.xy / resolution.xy ;\\n  vec2 vUv = (uv - vec2(0.5))*resolution.zw + vec2(0.5);\\n  vUv.y = 1. - vUv.y;\\n  vec4 tex1 = texture2D(image1,mirrored(vUv));\\n  vec2 fake3d = vec2(vUv.x + (tex1.r - 0.5)*mouse.x/threshold.x, vUv.y + (tex1.r - 0.5)*mouse.y/threshold.y);\\n  gl_FragColor = texture2D(image0,mirrored(fake3d));\\n}\"","import React from \"react\";\n\nimport Sketch from \"./Sketch\";\n\nimport MainImg from \"./img/Toha.jpg\";\nimport MapImg from \"./img/Toha-map.jpg\";\n\nimport \"./index.css\";\n\nclass App extends React.Component {\n  componentDidMount() {\n    new Sketch(MainImg, MapImg);\n  }\n\n  render() {\n    return (\n      <div className=\"frame\">\n        <div id=\"gl\" />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/Toha.c4ee0dc2.jpg\";","module.exports = __webpack_public_path__ + \"static/media/Toha-map.365b130b.jpg\";"],"sourceRoot":""}